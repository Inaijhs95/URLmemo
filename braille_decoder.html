<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>アルファベット点字デコードツール</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .braille-cell {
            display: inline-block;
            margin: 10px;
            text-align: center;
        }
        .braille-dot {
            width: 20px;
            height: 20px;
            border: 1px solid #000;
            border-radius: 50%;
            margin: 5px;
            display: inline-block;
            cursor: pointer;
            background-color: white;
        }
        .braille-dot.checked {
            background-color: black;
        }
        #decodedText {
            margin-top: 20px;
            font-size: 1.5em;
            font-weight: bold;
        }
        .controls {
            margin-top: 20px;
        }
        button {
            padding: 10px 20px;
            font-size: 1em;
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <h1>アルファベット点字デコードツール</h1>
    <div id="brailleContainer">
        <div class="braille-cell" data-index="0">
            <div class="braille-dot" data-dot="1"></div>
            <div class="braille-dot" data-dot="4"></div><br>
            <div class="braille-dot" data-dot="2"></div>
            <div class="braille-dot" data-dot="5"></div><br>
            <div class="braille-dot" data-dot="3"></div>
            <div class="braille-dot" data-dot="6"></div>
        </div>
    </div>
    <div class="controls">
        <button id="addCell">セルを追加</button>
        <button id="removeCell">セルを削除</button>
        <button id="decode">デコード</button>
    </div>
    <div id="decodedText">デコード結果: </div>

    <script>
        const brailleMapping = {
            '100000': 'A',
            '110000': 'B',
            '100100': 'C',
            '100110': 'D',
            '100010': 'E',
            '110100': 'F',
            '110110': 'G',
            '110010': 'H',
            '010100': 'I',
            '010110': 'J',
            '101000': 'K',
            '111000': 'L',
            '101100': 'M',
            '101110': 'N',
            '101010': 'O',
            '111100': 'P',
            '111110': 'Q',
            '111010': 'R',
            '011100': 'S',
            '011110': 'T',
            '101001': 'U',
            '111001': 'V',
            '010111': 'W',
            '101101': 'X',
            '101111': 'Y',
            '101011': 'Z'
        };

        let cellCount = 1;

        document.getElementById('addCell').addEventListener('click', addBrailleCell);
        document.getElementById('removeCell').addEventListener('click', removeBrailleCell);
        document.getElementById('decode').addEventListener('click', decodeBraille);

        function addBrailleCell() {
            cellCount++;
            const brailleContainer = document.getElementById('brailleContainer');
            const newCell = document.createElement('div');
            newCell.className = 'braille-cell';
            newCell.setAttribute('data-index', cellCount - 1);
            newCell.innerHTML = `
                <div class="braille-dot" data-dot="1"></div>
                <div class="braille-dot" data-dot="4"></div><br>
                <div class="braille-dot" data-dot="2"></div>
                <div class="braille-dot" data-dot="5"></div><br>
                <div class="braille-dot" data-dot="3"></div>
                <div class="braille-dot" data-dot="6"></div>
            `;
            brailleContainer.appendChild(newCell);
            attachDotListeners(newCell);
        }

        function removeBrailleCell() {
            if (cellCount > 1) {
                const brailleContainer = document.getElementById('brailleContainer');
                brailleContainer.removeChild(brailleContainer.lastElementChild);
                cellCount--;
            }
        }

        function attachDotListeners(cell) {
            const dots = cell.querySelectorAll('.braille-dot');
            dots.forEach(dot => {
                dot.addEventListener('click', () => {
                    dot.classList.toggle('checked');
                });
            });
        }

        // Attach listeners to the initial cell
        const initialCell = document.querySelector('.braille-cell');
        attachDotListeners(initialCell);

        function decodeBraille() {
            const cells = document.querySelectorAll('.braille-cell');
            let decodedText = '';
            cells.forEach(cell => {
                const dots = cell.querySelectorAll('.braille-dot');
                let pattern = '';
                for (let i = 1; i <=6; i++) {
                    const dot = cell.querySelector(`.braille-dot[data-dot="${i}"]`);
                    pattern += dot.classList.contains('checked') ? '1' : '0';
                }
                decodedText += brailleMapping[pattern] || '?';
            });
            document.getElementById('decodedText').innerText = "デコード結果: " + decodedText;
        }
    </script>
</body>
</html>
